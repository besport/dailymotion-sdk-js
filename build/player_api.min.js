window.DM||(DM={_apiKey:null,_session:null,_userStatus:"unknown",_refreshRequested:!1,_refreshCallbacks:[],_sessionLoadingMethod:null,_logging:!0,_domain:{api:"https://api.dailymotion.com",www:"//www.dailymotion.com",cdn:"//api.dmcdn.net"},_oauth:{logoutUrl:"https://www.dailymotion.com/oauth/logout",authorizeUrl:"https://www.dailymotion.com/oauth/authorize",tokenUrl:"https://graphql.api.dailymotion.com/oauth/token"},copy:function(o,t,n,e){for(var r in t)(n||void 0===o[r])&&(o[r]=e?e(t[r]):t[r]);return o},create:function(o,t){for(var n=window.DM,e=o?o.split("."):[],r=e.length,i=0;i<r;i++){var l=e[i],a=n[l];a||(a=t&&i+1==r?t:{},n[l]=a),n=a}return n},provide:function(o,t,n){return DM.copy("string"==typeof o?DM.create(o):o,t,n)},guid:function(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")},log:function(o){DM._logging&&(window.Debug&&window.Debug.writeln?window.Debug.writeln(o):window.console&&window.console.log(o)),DM.Event&&DM.Event.fire("dm.log",o)},error:function(o){window.console&&window.console.error(o),DM.Event&&DM.Event.fire("dm.error",o)},$:function(o){return"string"==typeof o&&(o=document.getElementById(o)),o},parseBool:function(o){return!0===o||!1===o?o:0!==o&&("string"==typeof o?!o.match(/^(?:|false|no|off|0)$/i):!!o)},type:function(o){if(!DM._class2type){DM._class2type={};for(var t="Boolean Number String Function Array Date RegExp Object".split(" "),n=0,e=t.length;n<e;n++){var r=t[n];DM._class2type["[object "+r+"]"]=r.toLowerCase()}DM._class2type["[object Undefined]"]="undefined"}return null===o?String(o):DM._class2type[Object.prototype.toString.call(o)]||"object"}});DM.provide("Array",{indexOf:function(r,n){if(r.indexOf)return r.indexOf(n);var e=r.length;if(e)for(var t=0;t<e;t++)if(r[t]===n)return t;return-1},merge:function(r,n){for(var e=0;e<n.length;e++)DM.Array.indexOf(r,n[e])<0&&r.push(n[e]);return r},flatten:function(r){for(var n in r)r.hasOwnProperty(n)&&"array"==DM.type(r[n])&&(r[n]=r[n].join(","));return r},filter:function(r,n){for(var e=[],t=0;t<r.length;t++)n(r[t])&&e.push(r[t]);return e},keys:function(r,n){var e=[];for(var t in r)(n||r.hasOwnProperty(t))&&e.push(t);return e},map:function(r,n){for(var e=[],t=0;t<r.length;t++)e.push(n(r[t]));return e},forEach:function(r,n,e){if(r)if("[object Array]"!==Object.prototype.toString.apply(r)&&(r instanceof Function||"number"!=typeof r.length))for(var t in r)(e||r.hasOwnProperty(t))&&n(r[t],t,r);else if(r.forEach)r.forEach(n);else for(var f=0,o=r.length;f<o;f++)n(r[f],f,r)}});DM.provide("",{player:function(e,t){return DM.Player.create(e,t)}}),DM.provide("Player",{_INSTANCES:{},_INTERVAL_ID:null,_PROTOCOL:null,API_MODE:null,EVENT_HANDLERS:{},apiReady:!1,autoplay:!1,currentTime:0,bufferedTime:0,duration:NaN,seeking:!1,error:null,ended:!1,muted:!1,volume:1,paused:!0,fullscreen:!1,controls:void 0,rebuffering:!1,qualities:[],quality:void 0,subtitles:[],subtitle:void 0,video:null,play:function(){this.api("play")},togglePlay:function(){this.api("toggle-play")},pause:function(){this.api("pause")},seek:function(e){this.api("seek",e)},load:function(e,t){this.api("load",e,t)},setMuted:function(e){this.api("muted",e)},toggleMuted:function(){this.api("toggle-muted")},setVolume:function(e){this.api("volume",e)},setQuality:function(e){this.api("quality",e)},setSubtitle:function(e){this.api("subtitle",e)},setFullscreen:function(e){this.api("fullscreen",e)},setControls:function(e){this.api("controls",e)},toggleControls:function(){this.api("toggle-controls")},setProp:function(){this.api.apply(this,["set-prop"].concat([].slice.call(arguments)))},watchOnSite:function(e){this.api("watch-on-site")},api:function(e){var t=2<=arguments.length?[].slice.call(arguments,1):[];this._send(e,t)},create:function(e,t){if(!(e=DM.$(e))||1!=e.nodeType)throw new Error("Invalid first argument sent to DM.player(), requires a HTML element or element id: "+e);if(!t||"object"!=typeof t)throw new Error("Missing `options' parameter for DM.player()");if(t=DM.copy(t,{width:480,height:270,title:"video player",params:{},events:{}}),location.search.length>1&&-1!==location.search.indexOf("dm:params")){var i=DM.QS.decode(location.search.substr(1));"dm:params"in i&&(t.params=DM.copy(DM.QS.decode(i["dm:params"]),t.params))}DM._domain.www=DM._domain.www.replace(/^https?\:/,""),DM.Player._PROTOCOL=window.location&&/^https?:$/.test(window.location.protocol)?window.location.protocol:"http:";var a=document.createElement("iframe");if(DM.Array.forEach(["id","style","class"],function(t){var i=e.getAttribute(t);i&&a.setAttribute(t,i)}),a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen","true"),a.setAttribute("webkitallowfullscreen","true"),a.setAttribute("mozallowfullscreen","true"),a.title="Dailymotion "+t.title,a.type="text/html",a.width=t.width,a.height=t.height,e.parentNode.replaceChild(a,e),DM.copy(a,DM.Player),a.init(t.video,t.params),"object"==typeof t.events)for(var s in t.events)a.addEventListener(s,t.events[s],!1);return a},init:function(e,t){DM.Player._installHandlers(),t="object"==typeof t?t:{},t.api=DM.Player.API_MODE,location.origin?t.origin=location.origin:t.origin="*",DM._apiKey&&(t.apiKey=DM._apiKey),this.id=t.id=this.id?this.id:DM.guid(),this.src=DM.Player._PROTOCOL+DM._domain.www+"/embed"+(e?"/video/"+e:"")+"?"+DM.QS.encode(t),DM.Player._INSTANCES[this.id]!=this&&(DM.Player._INSTANCES[this.id]=this,this.addEventListener("unload",function(){delete DM.Player._INSTANCES[this.id]})),this.autoplay=DM.parseBool(t.autoplay)},_installHandlers:function(){if(null===DM.Player.API_MODE&&window.postMessage){DM.Player.API_MODE="postMessage";var e=function(e){if(e.origin&&0===e.origin.indexOf(DM.Player._PROTOCOL+DM._domain.www)){var t=DM.QS.decode(e.data);if(t.id&&t.event){DM.$(t.id)._recvEvent(t)}}};window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e)}},_send:function(e,t){if(this.apiReady)"postMessage"==DM.Player.API_MODE&&this.contentWindow.postMessage(JSON.stringify({command:e,parameters:t||[]}),DM.Player._PROTOCOL+DM._domain.www);else try{console&&"function"==typeof console.warn&&console.warn('Player not ready. Ignoring command : "'+e+'"')}catch(e){}},_dispatch:document.createEvent?function(e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),this.dispatchEvent(t)}:function(e){if("on"+e in this)t=document.createEventObject(),this.fireEvent("on"+e,t);else if(e in this.EVENT_HANDLERS){var t={type:e,target:this};DM.Array.forEach(this.EVENT_HANDLERS[e],function(e){e(t)})}},_recvEvent:function(e){switch(e.event){case"apiready":if(this.apiReady)return;this.apiReady=!0;break;case"start":this.ended=!1;break;case"loadedmetadata":this.error=null;break;case"timeupdate":case"ad_timeupdate":this.currentTime=parseFloat(e.time);break;case"progress":this.bufferedTime=parseFloat(e.time);break;case"durationchange":this.duration=parseFloat(e.duration);break;case"seeking":this.seeking=!0,this.currentTime=parseFloat(e.time);break;case"seeked":this.seeking=!1,this.currentTime=parseFloat(e.time);break;case"fullscreenchange":this.fullscreen=DM.parseBool(e.fullscreen);break;case"controlschange":this.controls=DM.parseBool(e.controls);break;case"volumechange":this.volume=parseFloat(e.volume),this.muted=DM.parseBool(e.muted);break;case"video_start":case"ad_start":case"ad_play":case"playing":case"play":this.paused=!1;break;case"end":this.ended=!0;break;case"ad_pause":case"ad_end":case"video_end":case"pause":this.paused=!0;break;case"error":this.error={code:e.code,title:e.title,message:e.message};break;case"rebuffer":this.rebuffering=DM.parseBool(e.rebuffering);break;case"qualitiesavailable":this.qualities=e.qualities;break;case"qualitychange":this.quality=e.quality;break;case"subtitlesavailable":this.subtitles=e.subtitles;break;case"subtitlechange":this.subtitle=e.subtitle;break;case"videochange":this.video={videoId:e.videoId,title:e.title}}this._dispatch(e.event)},addEventListener:function(e,t,i){"on"+e in this&&this.attachEvent?this.attachEvent("on"+e,t,i):(e in this.EVENT_HANDLERS||(this.EVENT_HANDLERS[e]=[]),this.EVENT_HANDLERS[e].push(t))}});window.setTimeout(function(){window.dmAsyncInit&&dmAsyncInit()},0);DM.provide("QS",{encode:function(n,e,o){e=void 0===e?"&":e,o=!1===o?function(n){return n}:encodeURIComponent;var r=[];return DM.Array.forEach(n,function(n,e){null!==n&&void 0!==n&&r.push(o(e)+"="+o(n))}),r.sort(),r.join(e)},decode:function(n){for(var e=n.split("&"),o=decodeURIComponent,r={},t=0;t<e.length;t+=1){var i=e[t].indexOf("=");if(!(i<0))for(var d=o(e[t].substring(0,i)).replace(/\]/g,"").split("["),u=o(e[t].substring(i+1)),c=r;d.length>0;){var f=d.shift();0!==f.length&&(0===d.length?c[f]=u:void 0===c[f]&&(c[f]={}),c=c[f])}}return r}});